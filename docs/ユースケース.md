# ユースケース

## UC-1: メニュー選択

**アクター**: お客様
**前提条件**: 予約ページが表示されている
**主フロー**:
1. お客様がメニュー一覧から撮影プランを選択する
2. システムが選択されたプランの詳細（料金・所要時間・注意事項）を表示する
3. お客様がプランを確定する

**メニュー一覧**:
| ID | プラン名 | 撮影時間 | 所要時間(duration) | 料金 |
|----|----------|----------|--------------------|------|
| standard | 15分撮影プラン | 15分 | 30分 | ¥3,000 |
| premium | 30分撮影プラン | 30分 | 60分 | ¥5,000 |
| family | 七五三 3歳女の子プラン | 30分 | 120分 | ¥10,000 |
| wedding | 七五三 5歳男の子プラン | 30分 | 120分 | ¥10,000 |

**補足**: `duration` はカレンダー上の予約枠の長さ。準備・着付け・データ渡し等を含む。

---

## UC-2: 空き枠確認

**アクター**: お客様
**前提条件**: メニューが選択されている
**主フロー**:
1. お客様が予約日をカレンダーから選択する
2. システムが Google Calendar API から既存予約（busy期間）を取得する
3. システムが営業時間（9:00〜18:00）内で30分間隔のスロットを生成する
4. 各スロットについて、選択メニューの `duration` 分の枠が busy 期間と重複しないか判定する
5. 空きスロットを「予約可能」、重複スロットを「予約不可」として表示する

**ビジネスルール**:
- 営業時間: 9:00〜18:00
- スロット間隔: 30分刻み
- 予約枠は `duration` 分（メニューにより異なる）
- 予約枠の終了が営業時間を超えるスロットは生成しない
- 境界条件: スロット終了 === busy開始、スロット開始 === busy終了 の場合は重複しない

**例: 120分プラン（family）の場合**:
- 9:00〜11:00, 9:30〜11:30, ... , 16:00〜18:00 の15スロットが生成される
- 16:30開始は18:30終了となり営業時間外のため生成されない

---

## UC-3: 予約確定

**アクター**: お客様
**前提条件**: メニュー・日時が選択され、お客様情報が入力されている
**主フロー**:
1. お客様が氏名・メールアドレス・電話番号を入力する
2. お客様が「予約する」ボタンを押す
3. フロントエンドが GAS バックエンドに予約リクエストを送信する
4. GAS バックエンドが `MENU_CONFIG[menu].duration` を参照してカレンダーイベントの終了時刻を算出する
5. Google Calendar にイベントが作成される
6. お客様に予約完了を通知する

**入力バリデーション**:
- 氏名: 必須
- メールアドレス: 必須、メール形式
- 電話番号: 必須、10〜14桁の数字とハイフン

---

## UC-4: 入力内容クリア

**アクター**: お客様
**前提条件**: 予約フォームに入力が行われている
**主フロー**:
1. お客様が「クリア」ボタンを押す
2. システムがフォームの全入力内容（メニュー・日時・氏名・メールアドレス・電話番号）をリセットする
3. フォームが初期状態に戻る
